(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-68d1f335"],{"0a19":function(e,t,o){"use strict";o("488b")},3252:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"app-container menu-container"},[o("el-button",{staticClass:"addMenu",attrs:{type:"primary"},on:{click:e.addMenuDialog}},[e._v(" 添加菜单 ")]),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.menuList,border:"",stripe:""}},[o("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-table",{staticClass:"childrenTable",attrs:{data:t.row.children}},[o("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-table",{staticClass:"childrenTable",attrs:{data:t.row.children}},[o("el-table-column",{attrs:{type:"index"}}),o("el-table-column",{attrs:{label:"权限名称",prop:"name"}}),o("el-table-column",{attrs:{label:"权限路径",prop:"path"}}),o("el-table-column",{attrs:{label:"请求类型",prop:"method"}}),o("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(o){return e.showEditDialog(t.row)}}},[e._v("修改")]),o("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(o){return e.removeMenuById(t.row.id)}}},[e._v("删除")])]}}],null,!0)})],1)]}}],null,!0)}),o("el-table-column",{attrs:{type:"index"}}),o("el-table-column",{attrs:{label:"菜单名称",prop:"name"}}),o("el-table-column",{attrs:{label:"请求路径",prop:"path"}}),o("el-table-column",{attrs:{label:"菜单图标",prop:"icon"},scopedSlots:e._u([{key:"default",fn:function(e){return[o("i",{class:e.row.icon})]}}],null,!0)}),o("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(o){return e.showEditDialog(t.row)}}},[e._v("修改")]),o("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(o){return e.removeMenuById(t.row.id)}}},[e._v("删除")])]}}],null,!0)})],1)]}}])}),o("el-table-column",{attrs:{type:"index"}}),o("el-table-column",{attrs:{label:"菜单名称",prop:"name"}}),o("el-table-column",{attrs:{label:"请求路径",prop:"path"}}),o("el-table-column",{attrs:{label:"菜单图标",prop:"icon"},scopedSlots:e._u([{key:"default",fn:function(e){return[o("i",{class:e.row.icon})]}}])}),o("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(o){return e.showEditDialog(t.row)}}},[e._v("修改")]),o("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(o){return e.removeMenuById(t.row.id)}}},[e._v("删除")])]}}])})],1),o("el-dialog",{attrs:{title:e.dialogTitle+"菜单",visible:e.addDialogVisible,width:"50%"},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.addDialogClosed}},[o("el-form",{ref:"addFormRef",attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"菜单名称",prop:"name"}},[o("el-input",{model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),o("el-form-item",{attrs:{label:"请求路径",prop:"path"}},[o("el-input",{model:{value:e.addForm.path,callback:function(t){e.$set(e.addForm,"path",t)},expression:"addForm.path"}})],1),o("el-form-item",{attrs:{label:"菜单类型",prop:"type"}},[o("el-select",{attrs:{placeholder:"请选择"},on:{change:e.menuTypeChange},model:{value:e.addForm.type,callback:function(t){e.$set(e.addForm,"type",t)},expression:"addForm.type"}},e._l(e.types,(function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.permissionIsShow,expression:"permissionIsShow"}],attrs:{label:"权限表达式",prop:"permission"}},[o("el-input",{model:{value:e.addForm.permission,callback:function(t){e.$set(e.addForm,"permission",t)},expression:"addForm.permission"}})],1),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.iconIsShow,expression:"iconIsShow"}],attrs:{label:"菜单图标",prop:"icon"}},[o("el-input",{model:{value:e.addForm.icon,callback:function(t){e.$set(e.addForm,"icon",t)},expression:"addForm.icon"}})],1),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.methodIsShow,expression:"methodIsShow"}],attrs:{label:"请求方式",prop:"method"}},[o("el-input",{attrs:{placeholder:"例如: GET POST PUT DELETE"},model:{value:e.addForm.method,callback:function(t){e.$set(e.addForm,"method",t)},expression:"addForm.method"}})],1),o("el-form-item",{attrs:{label:"排序",prop:"sort"}},[o("el-input",{model:{value:e.addForm.sort,callback:function(t){e.$set(e.addForm,"sort",t)},expression:"addForm.sort"}})],1),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.parentIsShow,expression:"parentIsShow"}],attrs:{label:"父节点",prop:"parentId"}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.parentId,callback:function(t){e.$set(e.addForm,"parentId",t)},expression:"addForm.parentId"}},e._l(e.menuByTypeList,(function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.addMenu}},[e._v("确 定")])],1)],1),o("el-dialog",{attrs:{title:e.updateTitle+"菜单",visible:e.updateDialogVisible,width:"50%"},on:{"update:visible":function(t){e.updateDialogVisible=t},close:e.updateDialogClosed}},[o("el-form",{ref:"updateFormRef",attrs:{model:e.updateForm,rules:e.addFormRules,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"菜单名称",prop:"name"}},[o("el-input",{model:{value:e.updateForm.name,callback:function(t){e.$set(e.updateForm,"name",t)},expression:"updateForm.name"}})],1),o("el-form-item",{attrs:{label:"请求路径",prop:"path"}},[o("el-input",{model:{value:e.updateForm.path,callback:function(t){e.$set(e.updateForm,"path",t)},expression:"updateForm.path"}})],1),o("el-form-item",{attrs:{label:"菜单类型",prop:"typeName"}},[o("el-input",{attrs:{readonly:!0},model:{value:e.typeName,callback:function(t){e.typeName=t},expression:"typeName"}})],1),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.permissionIsShow,expression:"permissionIsShow"}],attrs:{label:"权限表达式",prop:"permission"}},[o("el-input",{model:{value:e.updateForm.permission,callback:function(t){e.$set(e.updateForm,"permission",t)},expression:"updateForm.permission"}})],1),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.iconIsShow,expression:"iconIsShow"}],attrs:{label:"菜单图标",prop:"icon"}},[o("el-input",{model:{value:e.updateForm.icon,callback:function(t){e.$set(e.updateForm,"icon",t)},expression:"updateForm.icon"}})],1),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.methodIsShow,expression:"methodIsShow"}],attrs:{label:"请求方式",prop:"method"}},[o("el-input",{model:{value:e.updateForm.method,callback:function(t){e.$set(e.updateForm,"method",t)},expression:"updateForm.method"}})],1),o("el-form-item",{attrs:{label:"排序",prop:"sort"}},[o("el-input",{model:{value:e.updateForm.sort,callback:function(t){e.$set(e.updateForm,"sort",t)},expression:"updateForm.sort"}})],1),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.parentIsShow,expression:"parentIsShow"}],attrs:{label:"父节点",prop:"parentId"}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:e.updateForm.parentId,callback:function(t){e.$set(e.updateForm,"parentId",t)},expression:"updateForm.parentId"}},e._l(e.menuByTypeList,(function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.updateDialogVisible=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.updateMenu}},[e._v("确 定")])],1)],1)],1)},n=[],r=o("c7eb"),i=o("1da1"),s=(o("b64b"),o("e9c4"),o("db93")),l=o("fa99"),d={name:"PagePermission",data:function(){return{loading:!1,dialogTitle:"新增",updateTitle:"修改",permissionIsShow:!0,iconIsShow:!0,parentIsShow:!1,methodIsShow:!1,addDialogVisible:!1,updateDialogVisible:!1,menuList:[],menuByTypeList:[],addFormRules:{name:[{required:!0,message:"请输入菜单名",trigger:"blur"},{max:50,message:"输入值已超出范围",trigger:"change"}],path:[{required:!0,message:"请输入路径",trigger:"blur"}],type:[{required:!0,message:"请选择菜单类型",trigger:"blur"}],sort:[{required:!0,message:"请输入序号",trigger:"blur"}],parentId:[{required:!0,message:"请选择父级",trigger:"blur"}]},addForm:{name:"",path:"",icon:"",type:"",permission:"",method:"",sort:"",parentId:""},updateForm:{name:"",path:"",icon:"",type:"",permission:"",method:"",sort:"",parentId:""},typeName:"",types:[{id:0,name:"目录"},{id:1,name:"页面"},{id:2,name:"按钮"}]}},created:function(){this.getMenuList()},computed:{routesData:function(){return this.menuList}},methods:{getMenuList:function(){var e=this;return Object(i["a"])(Object(r["a"])().mark((function t(){var o;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,Object(s["f"])();case 3:o=t.sent,200===o.code?e.menuList=o.data:10002===o.code?e.$router.push("/login"):e.$message.error("获取菜单列表失败"),e.loading=!1;case 6:case"end":return t.stop()}}),t)})))()},menuTypeChange:function(e){this.$set(this.addForm,"parentId",null),0===e?(this.permissionIsShow=!0,this.iconIsShow=!0,this.parentIsShow=!1,this.methodIsShow=!1,this.addForm.parentId=0):1===e?(this.permissionIsShow=!0,this.iconIsShow=!0,this.methodIsShow=!1,this.permissionByType(e)):2===e&&(this.permissionIsShow=!1,this.iconIsShow=!1,this.methodIsShow=!0,this.permissionByType(e))},permissionByType:function(e){var t=this;this.parentIsShow=!0,Object(l["b"])(e).then((function(e){200===e.code?t.menuByTypeList=e.data:t.$message.error("根据类型获取权限列表失败")}))},addMenuDialog:function(){this.addForm={},this.addDialogVisible=!0,this.dialogTitle="新增"},addDialogClosed:function(){this.addDialogVisible=!1,this.$refs.addFormRef.resetFields()},addMenu:function(){var e=this;return Object(i["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.addFormRef.validate((function(t){t?Object(l["d"])(e.addForm).then((function(t){200===t.code?(e.$message.success("添加菜单成功"),e.addDialogVisible=!1,e.addForm={},e.getMenuList()):e.$message.error("添加菜单失败，请检查后重试")})):e.$message.error("表单校验未通过，请检查后重新提交")}));case 1:case"end":return t.stop()}}),t)})))()},showEditDialog:function(e){var t=JSON.parse(JSON.stringify(e));this.updateForm=t,this.updateDialogVisible=!0,0===this.updateForm.type?(this.permissionIsShow=!0,this.iconIsShow=!0,this.parentIsShow=!1,this.methodIsShow=!1,this.addForm.parentId=0):1===this.updateForm.type?(this.permissionIsShow=!0,this.iconIsShow=!0,this.methodIsShow=!1,this.parentIsShow=!0,this.permissionByType(this.updateForm.type)):2===this.updateForm.type&&(this.permissionIsShow=!1,this.iconIsShow=!1,this.methodIsShow=!0,this.parentIsShow=!0,this.permissionByType(this.updateForm.type)),this.getTypeName(this.updateForm.type)},getTypeName:function(e){0===e&&(this.typeName="目录"),1===e&&(this.typeName="页面"),2===e&&(this.typeName="按钮")},updateDialogClosed:function(){this.updateForm={},this.updateDialogVisible=!1,this.$refs.updateFormRef.resetFields()},updateMenu:function(){var e=this;return Object(i["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.updateFormRef.validate((function(t){t?Object(l["a"])(e.updateForm.id,e.updateForm).then((function(t){200===t.code?(e.$message.success("保存/修改菜单成功"),e.updateDialogVisible=!1,e.updateForm={},e.getMenuList()):e.$message.error("保存/修改菜单失败，请检查后重试")})):e.$message.error("表单校验未通过，请检查后重新提交")}));case 1:case"end":return t.stop()}}),t)})))()},removeMenuById:function(e){var t=this;return Object(i["a"])(Object(r["a"])().mark((function o(){return Object(r["a"])().wrap((function(o){while(1)switch(o.prev=o.next){case 0:t.$confirm("是否删除该菜单/权限?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["c"])(e).then((function(e){200===e.code?(t.getMenuList(),t.$message.success("删除成功")):t.$message.error("删除失败，请检查后重试")}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}));case 1:case"end":return o.stop()}}),o)})))()}}},u=d,c=(o("0a19"),o("2877")),p=Object(c["a"])(u,a,n,!1,null,"081365a6",null);t["default"]=p.exports},"488b":function(e,t,o){},db93:function(e,t,o){"use strict";o.d(t,"f",(function(){return n})),o.d(t,"e",(function(){return r})),o.d(t,"d",(function(){return i})),o.d(t,"c",(function(){return s})),o.d(t,"a",(function(){return l})),o.d(t,"g",(function(){return d})),o.d(t,"b",(function(){return u}));var a=o("b775");function n(){return Object(a["a"])({url:"admin/sec/permission/tree",method:"get"})}function r(e){return Object(a["a"])({url:"/admin/sec/role/page",method:"post",data:e})}function i(){return Object(a["a"])({url:"/admin/sec/role/list",method:"get"})}function s(e){return Object(a["a"])({url:"/admin/sec/role/user/".concat(e),method:"get"})}function l(e){return Object(a["a"])({url:"/admin/sec/role/save",method:"post",data:e})}function d(e,t){return Object(a["a"])({url:"/admin/sec/role/edit/".concat(e),method:"put",data:t})}function u(e){return Object(a["a"])({url:"/admin/sec/role/remove/".concat(e),method:"delete"})}},e9c4:function(e,t,o){var a=o("23e7"),n=o("d066"),r=o("d039"),i=n("JSON","stringify"),s=/[\uD800-\uDFFF]/g,l=/^[\uD800-\uDBFF]$/,d=/^[\uDC00-\uDFFF]$/,u=function(e,t,o){var a=o.charAt(t-1),n=o.charAt(t+1);return l.test(e)&&!d.test(n)||d.test(e)&&!l.test(a)?"\\u"+e.charCodeAt(0).toString(16):e},c=r((function(){return'"\\udf06\\ud834"'!==i("\udf06\ud834")||'"\\udead"'!==i("\udead")}));i&&a({target:"JSON",stat:!0,forced:c},{stringify:function(e,t,o){var a=i.apply(null,arguments);return"string"==typeof a?a.replace(s,u):a}})}}]);