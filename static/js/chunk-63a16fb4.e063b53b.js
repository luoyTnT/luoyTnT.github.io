(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63a16fb4"],{"5ed7":function(e,t,n){},b8a4:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:2.5}},[n("el-button",{attrs:{type:"primary"},on:{click:e.handleAddCommon}},[e._v(" "+e._s(e.$t("permission.addCommon"))+" ")])],1),n("el-col",{attrs:{span:4}},[n("el-input",{attrs:{placeholder:"根据标题搜索",clearable:""},on:{clear:e.getCommonPage},model:{value:e.queryInfo.title,callback:function(t){e.$set(e.queryInfo,"title",t)},expression:"queryInfo.title"}})],1),n("el-col",{attrs:{span:4}},[n("el-input",{attrs:{placeholder:"根据配置key搜索",clearable:""},on:{clear:e.getCommonPage},model:{value:e.queryInfo.configKey,callback:function(t){e.$set(e.queryInfo,"configKey",t)},expression:"queryInfo.configKey"}})],1),n("el-col",{attrs:{span:2}},[n("el-button",{attrs:{type:"primary"},on:{click:e.getCommonPage}},[e._v("搜索")])],1)],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:e.commonList,border:""}},[n("el-table-column",{attrs:{align:"center",label:"编号",type:"index",index:e.tableIndex,width:"100"}}),n("el-table-column",{attrs:{align:"center",label:"标题"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.title)+" ")]}}])}),n("el-table-column",{attrs:{align:"center",label:"配置key"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.configKey)+" ")]}}])}),n("el-table-column",{attrs:{align:"center",label:"配置值","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.configValue)+" ")]}}])}),n("el-table-column",{attrs:{align:"center",label:"描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.description)+" ")]}}])}),n("el-table-column",{attrs:{align:"center",label:"操作",width:"350"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){return e.handleEdit(t)}}},[e._v(" "+e._s(e.$t("permission.editCommon"))+" ")]),n("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(n){return e.handleDelete(t)}}},[e._v(" "+e._s(e.$t("permission.delete"))+" ")])]}}])})],1),n("el-pagination",{attrs:{"current-page":e.queryInfo.page,"page-sizes":[10,20,50,100],"page-size":e.queryInfo.size,layout:"total, sizes, prev, pager, next, jumper",total:e.pageInfo.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),n("el-dialog",{attrs:{visible:e.dialogVisible,title:"edit"===e.dialogType?"编辑配置":"新增配置"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{ref:"confirmCommonRef",staticStyle:{width:"100%","margin-top":"30px"},attrs:{model:e.common,"label-width":"100px","label-position":"left",rules:e.addOrEditRules}},[n("el-form-item",{attrs:{label:"标题",prop:"title"}},[n("el-input",{attrs:{placeholder:"配置的标题"},model:{value:e.common.title,callback:function(t){e.$set(e.common,"title",t)},expression:"common.title"}})],1),n("el-form-item",{attrs:{label:"配置key",prop:"configKey"}},[n("el-input",{attrs:{readonly:"edit"===e.dialogType,placeholder:"配置的key"},model:{value:e.common.configKey,callback:function(t){e.$set(e.common,"configKey",t)},expression:"common.configKey"}})],1),n("el-form-item",{attrs:{label:"配置值",prop:"configValue"}},[n("el-input",{attrs:{placeholder:"配置的值"},model:{value:e.common.configValue,callback:function(t){e.$set(e.common,"configValue",t)},expression:"common.configValue"}})],1),n("el-form-item",{attrs:{label:"描述",prop:"description"}},[n("el-input",{attrs:{placeholder:"配置描述"},model:{value:e.common.description,callback:function(t){e.$set(e.common,"description",t)},expression:"common.description"}})],1)],1),n("div",{staticStyle:{"text-align":"right"}},[n("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogVisible=!1}}},[e._v(" "+e._s(e.$t("permission.cancel"))+" ")]),n("el-button",{attrs:{type:"primary"},on:{click:e.confirmCommon}},[e._v(" "+e._s(e.$t("permission.confirm"))+" ")])],1)],1)],1)},a=[],i=n("c7eb"),r=n("1da1"),l=(n("a434"),n("ed08")),c=n("b775");function s(e){return Object(c["a"])({url:"/common/page",method:"post",data:e})}function u(e){return Object(c["a"])({url:"/common/save",method:"post",data:e})}function m(e,t){return Object(c["a"])({url:"/common/edit/".concat(t),method:"put",data:e})}function d(e){return Object(c["a"])({url:"/common/remove/".concat(e),method:"delete"})}var g={name:"Common",data:function(){return{loading:!1,commonList:[],pageInfo:{page:1,size:10,total:0,pages:0},queryInfo:{title:null,configKey:null,page:1,size:10},common:{id:"",title:"",configKey:"",configValue:"",description:""},dialogVisible:!1,dialogType:"new",checkStrictly:!1,addOrEditRules:{title:[{required:!0,message:"请输入标题",trigger:"blur"},{max:100,message:"输入值已超出范围",trigger:"change"}],configKey:[{required:!0,message:"请输入配置key",trigger:"blur"},{max:50,message:"输入值已超出范围",trigger:"change"}],configValue:[{required:!0,message:"请输入配置值",trigger:"blur"},{max:2e3,message:"输入值已超出范围",trigger:"change"}],description:[{required:!0,message:"请输入描述信息",trigger:"blur"},{max:255,message:"输入值已超出范围",trigger:"change"}]}}},created:function(){this.getCommonPage()},methods:{getCommonPage:function(){var e=this;return Object(r["a"])(Object(i["a"])().mark((function t(){var n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,s(e.queryInfo);case 3:n=t.sent,e.commonList=n.data.list,e.pageInfo=n.data.pageInfo,e.loading=!1;case 7:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.queryInfo.size=e,this.getCommonPage()},handleCurrentChange:function(e){this.queryInfo.page=e,this.getCommonPage()},tableIndex:function(e){return(this.queryInfo.page-1)*this.queryInfo.size+e+1},handleAddCommon:function(){var e=this;return Object(r["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.common={},e.dialogType="new",e.dialogVisible=!0;case 3:case"end":return t.stop()}}),t)})))()},handleEdit:function(e){var t=this;return Object(r["a"])(Object(i["a"])().mark((function n(){return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.dialogType="edit",t.dialogVisible=!0,t.common=Object(l["c"])(e.row);case 3:case"end":return n.stop()}}),n)})))()},confirmCommon:function(){var e=this;return Object(r["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.confirmCommonRef.validate((function(t){if(t){var n="edit"===e.dialogType;n?m(e.common,e.common.id).then((function(t){200===t.code?(e.$message.success("修改成功"),e.getCommonPage(),e.dialogVisible=!1):e.$message.error("修改配置失败，请检查后重试")})):u(e.common).then((function(t){200===t.code?(e.$message.success("添加成功"),e.getCommonPage(),e.dialogVisible=!1):e.$message.error("添加配置失败，请检查后重试")}))}else e.$message.error("表单校验未通过，请检查后重新提交")}));case 1:case"end":return t.stop()}}),t)})))()},handleDelete:function(e){var t=this,n=e.$index,o=e.row;this.$confirm("确定要删除配置信息吗？","Warning",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(r["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d(o.id);case 2:t.commonList.splice(n,1),t.$message({type:"success",message:"Delete succed!"});case 4:case"end":return e.stop()}}),e)})))).catch((function(e){console.error(e)}))}}},p=g,f=(n("c387"),n("2877")),b=Object(f["a"])(p,o,a,!1,null,"b66d254a",null);t["default"]=b.exports},c387:function(e,t,n){"use strict";n("5ed7")}}]);