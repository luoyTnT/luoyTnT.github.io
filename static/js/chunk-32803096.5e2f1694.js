(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-32803096"],{"3d9f":function(e,t,a){},"75cc":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"d",(function(){return o})),a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return c}));var r=a("b775");function n(e){return Object(r["a"])({url:"/dynamicCategory/list",method:"post",data:e})}function o(e){return Object(r["a"])({url:"/dynamicCategory/save",method:"post",data:e})}function i(e,t){return Object(r["a"])({url:"/dynamicCategory/edit/".concat(t),method:"put",data:e})}function c(e){return Object(r["a"])({url:"/dynamicCategory/remove/".concat(e),method:"delete"})}},"89b7":function(e,t,a){"use strict";a("3d9f")},"9ac0":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container category-container"},[a("el-button",{staticClass:"addCategory",attrs:{type:"primary"},on:{click:e.handleAddCategory}},[e._v(" 添加分类 ")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.categoryList,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-table",{staticClass:"childrenTable",attrs:{data:t.row.children}},[a("el-table-column",{attrs:{type:"index"}}),a("el-table-column",{attrs:{label:"分类名",prop:"title"}}),a("el-table-column",{attrs:{label:"分类介绍",prop:"content"}}),a("el-table-column",{attrs:{label:"排序",prop:"priority"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return e.handleEditCategory(t)}}},[e._v("修改")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return e.removeCategory(t.row.id)}}},[e._v("删除")])]}}],null,!0)})],1)]}}])}),a("el-table-column",{attrs:{type:"index"}}),a("el-table-column",{attrs:{label:"分类名",prop:"title"}}),a("el-table-column",{attrs:{label:"分类介绍",prop:"content"}}),a("el-table-column",{attrs:{label:"排序",prop:"priority"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return e.handleEditCategory(t)}}},[e._v("修改")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return e.removeCategory(t.row.id)}}},[e._v("删除")])]}}])})],1),a("el-dialog",{attrs:{visible:e.dialogVisible,title:"edit"===e.dialogType?"编辑分类":"新增分类"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"confirmCategoryRef",staticStyle:{width:"100%"},attrs:{model:e.category,"label-width":"100px","label-position":"left",rules:e.addOrEditRules}},[a("el-form-item",{attrs:{label:"分类名",prop:"title"}},[a("el-input",{attrs:{placeholder:"分类名"},model:{value:e.category.title,callback:function(t){e.$set(e.category,"title",t)},expression:"category.title"}})],1),a("el-form-item",{attrs:{label:"分类介绍",prop:"content"}},[a("el-input",{attrs:{placeholder:"分类介绍"},model:{value:e.category.content,callback:function(t){e.$set(e.category,"content",t)},expression:"category.content"}})],1),a("el-form-item",{attrs:{label:"优先级排序",prop:"priority"}},[a("el-input",{attrs:{placeholder:"优先级排序"},model:{value:e.category.priority,callback:function(t){e.$set(e.category,"priority",t)},expression:"category.priority"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"0"!==this.category.parentId,expression:"this.category.parentId !== '0'"}],attrs:{label:"父级",prop:"parentId"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.category.parentId,callback:function(t){e.$set(e.category,"parentId",t)},expression:"category.parentId"}},e._l(e.categoryParentList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})})),1)],1)],1),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirmCategory}},[e._v("确定")])],1)],1)],1)},n=[],o=a("c7eb"),i=a("1da1"),c=a("ed08"),l=a("75cc"),s={name:"Category",data:function(){return{loading:!1,categoryList:[],categoryParentList:[],searchInfo:{title:null,parents:!1},category:{id:"",title:"",content:"",priority:"",display:"",parentId:""},dialogType:"new",dialogVisible:!1,addOrEditRules:{title:[{required:!0,message:"请输入分类名",trigger:"blur"},{max:20,message:"输入值已超出范围",trigger:"change"}],content:[{required:!0,message:"请填写分类介绍",trigger:"blur"},{max:255,message:"输入值已超出范围",trigger:"change"}]}}},created:function(){this.getCategoryList()},methods:{getCategoryList:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,Object(l["b"])(e.searchInfo);case 3:a=t.sent,200===a.code?e.categoryList=a.data:10002===a.code?e.$router.push("/login"):e.$message.error("获取菜单列表失败"),e.loading=!1;case 6:case"end":return t.stop()}}),t)})))()},getCategoryParentList:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.searchInfo.parents=!0,t.next=3,Object(l["b"])(e.searchInfo);case 3:a=t.sent,200===a.code?e.categoryParentList=a.data:e.$message.error("获取父级分类失败"),e.searchInfo.parents=!1;case 6:case"end":return t.stop()}}),t)})))()},handleAddCategory:function(){this.category={},this.dialogType="new",this.dialogVisible=!0,this.getCategoryParentList()},handleEditCategory:function(e){this.dialogType="edit",this.dialogVisible=!0,this.category=Object(c["c"])(e.row),this.getCategoryParentList()},confirmCategory:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.confirmCategoryRef.validate((function(t){if(t){var a="edit"===e.dialogType;a?Object(l["a"])(e.category,e.category.id).then((function(t){200===t.code?(e.$message.success("修改成功"),e.getCategoryList(),e.dialogVisible=!1):e.$message.error("修改分类失败，请检查后重试")})):Object(l["d"])(e.category).then((function(t){200===t.code?(e.$message.success("添加成功"),e.getCategoryList(),e.dialogVisible=!1):e.$message.error("添加分类失败，请检查后重试")}))}else e.$message.error("表单校验未通过，请检查后重新提交")}));case 1:case"end":return t.stop()}}),t)})))()},removeCategory:function(e){var t=this;return Object(i["a"])(Object(o["a"])().mark((function a(){return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.$confirm("是否删除当前分类?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["c"])(e).then((function(e){200===e.code?(t.getCategoryList(),t.$message.success("删除成功")):t.$message.error("删除失败，请检查后重试")}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}));case 1:case"end":return a.stop()}}),a)})))()}}},u=s,d=(a("89b7"),a("2877")),g=Object(d["a"])(u,r,n,!1,null,"aa0544a6",null);t["default"]=g.exports}}]);