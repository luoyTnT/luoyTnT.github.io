(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6544d208"],{"05d6":function(e,t,n){"use strict";n("a953")},9988:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:4}},[n("el-input",{attrs:{placeholder:"根据上传用户搜索",clearable:""},on:{clear:e.getLogPage},model:{value:e.queryInfo.nickname,callback:function(t){e.$set(e.queryInfo,"nickname",t)},expression:"queryInfo.nickname"}})],1),n("el-col",{attrs:{span:2}},[n("el-button",{attrs:{type:"primary"},on:{click:e.getLogPage}},[e._v("搜索")])],1)],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:e.logList,border:""}},[n("el-table-column",{attrs:{align:"center",label:"编号",type:"index",index:e.tableIndex,width:"100"}}),n("el-table-column",{attrs:{align:"center",label:"操作人"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.nickname)+" ")]}}])}),n("el-table-column",{attrs:{align:"center",label:"日志类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.logType)+" ")]}}])}),n("el-table-column",{attrs:{align:"center",label:"日志模块"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.logModule)+" ")]}}])}),n("el-table-column",{attrs:{align:"center",label:"日志内容","show-overflow-tooltip":!0,width:"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.content)+" ")]}}])}),n("el-table-column",{attrs:{align:"center",label:"IP地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.ip)+" ")]}}])}),n("el-table-column",{attrs:{align:"center",label:"地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.location)+" ")]}}])}),n("el-table-column",{attrs:{align:"center",label:"记录时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e._f("parseTime")(t.row.createTime,"{y}-{m}-{d} {h}:{i}")))])]}}])}),n("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(n){return e.handleDelete(t)}}},[e._v(" "+e._s(e.$t("permission.delete"))+" ")])]}}])})],1),n("el-pagination",{attrs:{"current-page":e.queryInfo.page,"page-sizes":[10,20,50,100],"page-size":e.queryInfo.size,layout:"total, sizes, prev, pager, next, jumper",total:e.pageInfo.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},o=[],l=n("c7eb"),r=n("1da1"),c=n("b775");function i(e){return Object(c["a"])({url:"/log/page",method:"post",data:e})}function s(e){return Object(c["a"])({url:"/log/remove/".concat(e),method:"delete"})}var u={name:"Log",data:function(){return{loading:!1,logList:[],pageInfo:{page:1,size:10,total:0,pages:0},queryInfo:{nickname:null,page:1,size:10},log:{nickname:"",logType:"",logModule:"",ip:"",location:"",createTime:"",content:""}}},created:function(){this.getLogPage()},methods:{getLogPage:function(){var e=this;return Object(r["a"])(Object(l["a"])().mark((function t(){var n;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,i(e.queryInfo);case 3:n=t.sent,e.logList=n.data.list,e.pageInfo=n.data.pageInfo,e.loading=!1;case 7:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.queryInfo.size=e,this.getLogPage()},handleCurrentChange:function(e){this.queryInfo.page=e,this.getLogPage()},tableIndex:function(e){return(this.queryInfo.page-1)*this.queryInfo.size+e+1},handleDelete:function(e){var t=this,n=e.row;this.$confirm("确定要删除文件吗？","Warning",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(r["a"])(Object(l["a"])().mark((function e(){return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s(n.id).then((function(e){200===e.code?(t.getLogPage(),t.$message.success("删除成功")):t.$message.error("删除失败，请检查后重试")}));case 2:case"end":return e.stop()}}),e)}))))}}},g=u,d=(n("05d6"),n("2877")),f=Object(d["a"])(g,a,o,!1,null,"4a4c8c1a",null);t["default"]=f.exports},a953:function(e,t,n){}}]);